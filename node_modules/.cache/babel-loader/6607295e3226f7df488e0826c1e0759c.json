{"ast":null,"code":"import _regeneratorRuntime from\"C:/laragon/www/loja-bim/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/laragon/www/loja-bim/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/laragon/www/loja-bim/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{TextField,Button}from\"@material-ui/core\";import{useSelector,useDispatch}from\"react-redux\";import{changeAuth,loginAuth}from'../../store/actions/auth.action';import{makeStyles}from'@material-ui/core/styles';import{Modal,Container,Row,Col}from'react-bootstrap';import Register from'../register';import{style}from'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{modal:{display:'flex',alignItems:'center',justifyContent:'center'},paper:{backgroundColor:theme.palette.background.paper,border:'0px',borderRadius:'5px',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});export default function Auth(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var handleClose=function handleClose(){setOpen(false);};useEffect(function(){if(props.opened===undefined){//faz nada kkk\n}else if(props.opened===true){setOpen(true);}},[props.opened]);var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.Auth;}),credentials=_useSelector.credentials,success=_useSelector.success;function handleLogin(){return _handleLogin.apply(this,arguments);}//Abertura e fechamento do signUp\nfunction _handleLogin(){_handleLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://Verifica se há token de acesso, se sim, o apaga \nif(localStorage.getItem('access_token')!==null){localStorage.removeItem('access_token');}//Dispacha as credenciais ao reducer\n_context.next=3;return dispatch(loginAuth(credentials));case 3://Cas haja um novo token de acesso, quer dizer quo login foi bem sucedido. Feito isso, a tela de login é fechada\nif(localStorage.getItem('access_token')!==null){setOpen(false);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleLogin.apply(this,arguments);}var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),signUpOpen=_useState4[0],setSignUpOpen=_useState4[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Register,{open:signUpOpen}),/*#__PURE__*/_jsxs(Modal,{show:open,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(\"h2\",{className:\"pl-5\",children:\"Fa\\xE7a o login\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(TextField,{label:\"Email\",type:\"email\",autoComplete:\"email\",margin:\"normal\",fullWidth:true,value:credentials.email,onChange:function onChange(text){return dispatch(changeAuth({email:text.target.value}));}})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(TextField,{label:\"Senha\",type:\"password\",margin:\"normal\",fullWidth:true,value:credentials.password,onChange:function onChange(text){return dispatch(changeAuth({password:text.target.value}));}})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,size:\"large\",className:\"mt-4 mb-4\",onClick:function onClick(){return handleLogin();},children:\"Logar\"})})})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center cadastre-se\",onClick:function onClick(e){setSignUpOpen(true);setTimeout(function(){setSignUpOpen();},3000);},children:\"N\\xE3o tem conta? Cadastre-se!\"})})})})]})]});}","map":{"version":3,"sources":["C:/laragon/www/loja-bim/src/view/auth/index.js"],"names":["useState","useEffect","TextField","Button","useSelector","useDispatch","changeAuth","loginAuth","makeStyles","Modal","Container","Row","Col","Register","style","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","border","borderRadius","boxShadow","shadows","padding","spacing","Auth","props","open","setOpen","handleClose","opened","undefined","dispatch","state","credentials","success","handleLogin","localStorage","getItem","removeItem","signUpOpen","setSignUpOpen","email","text","target","value","password","e","setTimeout"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {TextField, Button } from \"@material-ui/core\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { changeAuth, loginAuth } from '../../store/actions/auth.action';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Modal, Container, Row, Col } from 'react-bootstrap';\r\nimport Register from '../register';\r\nimport { style } from './style.css';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  paper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '0px',\r\n    borderRadius: '5px',\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\n\r\nexport default function Auth(props){\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  useEffect( ()=>{\r\n\r\n    if (props.opened === undefined){\r\n      //faz nada kkk\r\n    } else if (props.opened === true) {\r\n      setOpen(true);\r\n    }\r\n  },[props.opened] )\r\n\r\n  const dispatch = useDispatch();\r\n  const { credentials, success } = useSelector(state => state.Auth);\r\n\r\n  async function handleLogin(){\r\n\r\n    //Verifica se há token de acesso, se sim, o apaga \r\n    if (localStorage.getItem('access_token') !== null) {\r\n      localStorage.removeItem('access_token');\r\n    }\r\n\r\n    //Dispacha as credenciais ao reducer\r\n    await dispatch( loginAuth(credentials) );\r\n\r\n    //Cas haja um novo token de acesso, quer dizer quo login foi bem sucedido. Feito isso, a tela de login é fechada\r\n    if (localStorage.getItem('access_token') !== null) {\r\n      setOpen(false);\r\n    }\r\n\r\n  }\r\n\r\n  //Abertura e fechamento do signUp\r\n  const [signUpOpen, setSignUpOpen] = useState();\r\n\r\n  \r\n  return(\r\n    <>\r\n      <Register open={signUpOpen} />\r\n      <Modal show={open} onHide={handleClose}>\r\n        <Modal.Header closeButton>    \r\n          <h2 className='pl-5'>\r\n            Faça o login\r\n          </h2>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Container>\r\n            <Row>\r\n              <Col>\r\n                <TextField\r\n                label='Email'\r\n                type='email'\r\n                autoComplete='email'\r\n                margin='normal'\r\n                fullWidth\r\n                value={credentials.email}\r\n                onChange={text => dispatch(changeAuth({email: text.target.value}))}\r\n                />  \r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <TextField\r\n                label='Senha'\r\n                type='password'\r\n                margin='normal'\r\n                fullWidth\r\n                value={credentials.password}\r\n                onChange={text => dispatch(changeAuth({password: text.target.value}))}\r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button\r\n                variant='contained'\r\n                color='primary'\r\n                fullWidth\r\n                size='large'\r\n                className='mt-4 mb-4'\r\n                onClick={ () => handleLogin() }\r\n                >\r\n                  Logar\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Container>\r\n            <Row>\r\n              <Col\r\n                className='d-flex justify-content-center cadastre-se'\r\n                onClick={\r\n                  (e) => { \r\n                    setSignUpOpen(true);\r\n                    setTimeout(()=>{setSignUpOpen()}, 3000);\r\n                  }\r\n                } \r\n              >\r\n                Não tem conta? Cadastre-se!\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  )}"]},"metadata":{},"sourceType":"module"}