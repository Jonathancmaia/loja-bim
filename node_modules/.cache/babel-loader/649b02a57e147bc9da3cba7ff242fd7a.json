{"ast":null,"code":"import{Http}from'../../config/Http';import{changeLoading}from'./loading.action';import{changeNotify}from'./notify.action';export var actionTypes={CHANGE:'REGISTER_CHANGE',ERROR:'REGISTER_ERROR',SUCCESS:'REGISTER_SUCCESS'};export var changeRegister=function changeRegister(data){return{type:actionTypes.CHANGE,data:data};};export var errorRegister=function errorRegister(data){return{type:actionTypes.ERROR,data:data};};export var successRegister=function successRegister(data){return{type:actionTypes.SUCCESS,data:data};};export var setUserToken=function setUserToken(token){return function(dispatch){localStorage.setItem('access_token',token);dispatch(changeRegister({email:'',password:''}));dispatch(successRegister(true));};};export var register=function register(data){return function(dispatch){dispatch(changeLoading({open:true,msg:'Cadastrando usu치rio...'}));return Http.post('/signup',{name:data.name,email:data.email,password:data.password,cpf:data.cpf,tel:data.tel}).then(function(response){dispatch(changeLoading({open:false}));if(typeof response!=='undefined'){if(response.data.access_token){dispatch(changeNotify({open:true,class:'success',msg:'Usu치rio cadastrado com sucesso.'}));dispatch(setUserToken(response.data.access_token));}}}).catch(function(error){dispatch(changeLoading({open:false}));if(error.response){dispatch(errorRegister(error.response.data.errors));}});};};","map":{"version":3,"sources":["C:/laragon/www/loja-bim/src/store/actions/register.action.js"],"names":["Http","changeLoading","changeNotify","actionTypes","CHANGE","ERROR","SUCCESS","changeRegister","data","type","errorRegister","successRegister","setUserToken","token","dispatch","localStorage","setItem","email","password","register","open","msg","post","name","cpf","tel","then","response","access_token","class","catch","error","errors"],"mappings":"AAAA,OAASA,IAAT,KAAqB,mBAArB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OAASC,YAAT,KAA4B,iBAA5B,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,CACzBC,MAAM,CAAE,iBADiB,CAEzBC,KAAK,CAAE,gBAFkB,CAGzBC,OAAO,CAAE,kBAHgB,CAApB,CAMP,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,QAAW,CACvCC,IAAI,CAAEN,WAAW,CAACC,MADqB,CAEvCI,IAAI,CAAJA,IAFuC,CAAX,EAAvB,CAKP,MAAO,IAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACF,IAAD,QAAW,CACtCC,IAAI,CAAEN,WAAW,CAACE,KADoB,CAEtCG,IAAI,CAAJA,IAFsC,CAAX,EAAtB,CAKP,MAAO,IAAMG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACH,IAAD,QAAW,CACxCC,IAAI,CAAEN,WAAW,CAACG,OADsB,CAExCE,IAAI,CAAJA,IAFwC,CAAX,EAAxB,CAKP,MAAO,IAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,QAAI,UAAAC,QAAQ,CAAI,CAE/CC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCH,KAArC,EAEAC,QAAQ,CAAEP,cAAc,CAAC,CACvBU,KAAK,CAAE,EADgB,CAEvBC,QAAQ,CAAE,EAFa,CAAD,CAAhB,CAAR,CAKAJ,QAAQ,CAAEH,eAAe,CAAC,IAAD,CAAjB,CAAR,CACD,CAVgC,EAA1B,CAYP,MAAO,IAAMQ,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAX,IAAI,QAAI,UAAAM,QAAQ,CAAI,CAC1CA,QAAQ,CAACb,aAAa,CAAC,CACrBmB,IAAI,CAAE,IADe,CAErBC,GAAG,CAAE,wBAFgB,CAAD,CAAd,CAAR,CAKA,MAAOrB,CAAAA,IAAI,CAACsB,IAAL,CAAU,SAAV,CAAqB,CAC1BC,IAAI,CAAEf,IAAI,CAACe,IADe,CAE1BN,KAAK,CAAET,IAAI,CAACS,KAFc,CAG1BC,QAAQ,CAAEV,IAAI,CAACU,QAHW,CAI1BM,GAAG,CAAEhB,IAAI,CAACgB,GAJgB,CAK1BC,GAAG,CAAEjB,IAAI,CAACiB,GALgB,CAArB,EAMJC,IANI,CAMC,SAAAC,QAAQ,CAAI,CAChBb,QAAQ,CAAEb,aAAa,CAAC,CAACmB,IAAI,CAAE,KAAP,CAAD,CAAf,CAAR,CAEA,GAAG,MAAOO,CAAAA,QAAP,GAAoB,WAAvB,CAAmC,CACjC,GAAGA,QAAQ,CAACnB,IAAT,CAAcoB,YAAjB,CAA8B,CAC5Bd,QAAQ,CAAEZ,YAAY,CAAC,CACrBkB,IAAI,CAAE,IADe,CAErBS,KAAK,CAAE,SAFc,CAGrBR,GAAG,CAAE,iCAHgB,CAAD,CAAd,CAAR,CAMAP,QAAQ,CAAEF,YAAY,CAACe,QAAQ,CAACnB,IAAT,CAAcoB,YAAf,CAAd,CAAR,CACD,CACF,CACF,CApBI,EAoBFE,KApBE,CAoBI,SAAAC,KAAK,CAAI,CAChBjB,QAAQ,CAAEb,aAAa,CAAC,CAACmB,IAAI,CAAE,KAAP,CAAD,CAAf,CAAR,CACA,GAAGW,KAAK,CAACJ,QAAT,CAAkB,CAChBb,QAAQ,CAAEJ,aAAa,CAACqB,KAAK,CAACJ,QAAN,CAAenB,IAAf,CAAoBwB,MAArB,CAAf,CAAR,CACD,CACF,CAzBI,CAAP,CA0BD,CAhC2B,EAArB","sourcesContent":["import { Http } from '../../config/Http';\r\nimport { changeLoading } from './loading.action';\r\nimport { changeNotify} from './notify.action';\r\n\r\nexport const actionTypes = {\r\n  CHANGE: 'REGISTER_CHANGE',\r\n  ERROR: 'REGISTER_ERROR',\r\n  SUCCESS: 'REGISTER_SUCCESS'\r\n}\r\n\r\nexport const changeRegister = (data) => ({\r\n  type: actionTypes.CHANGE,\r\n  data\r\n})\r\n\r\nexport const errorRegister = (data) => ({\r\n  type: actionTypes.ERROR,\r\n  data\r\n})\r\n\r\nexport const successRegister = (data) => ({\r\n  type: actionTypes.SUCCESS,\r\n  data\r\n})\r\n\r\nexport const setUserToken = token => dispatch => {\r\n\r\n  localStorage.setItem('access_token', token);\r\n\r\n  dispatch( changeRegister({\r\n    email: '',\r\n    password: ''\r\n  }) )\r\n\r\n  dispatch( successRegister(true) )\r\n}\r\n\r\nexport const register = data => dispatch => {\r\n  dispatch(changeLoading({\r\n    open: true,\r\n    msg: 'Cadastrando usu치rio...'\r\n  }));\r\n\r\n  return Http.post('/signup', {\r\n    name: data.name,\r\n    email: data.email,\r\n    password: data.password,\r\n    cpf: data.cpf,\r\n    tel: data.tel\r\n  }).then(response => {\r\n      dispatch( changeLoading({open: false}) );\r\n      \r\n      if(typeof response !== 'undefined'){\r\n        if(response.data.access_token){\r\n          dispatch( changeNotify({\r\n            open: true,\r\n            class: 'success',\r\n            msg: 'Usu치rio cadastrado com sucesso.'\r\n          }) )\r\n\r\n          dispatch( setUserToken(response.data.access_token) );\r\n        }\r\n      }\r\n    }).catch(error => {\r\n      dispatch( changeLoading({open: false}) );\r\n      if(error.response){\r\n        dispatch( errorRegister(error.response.data.errors));\r\n      }\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}