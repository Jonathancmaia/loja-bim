{"ast":null,"code":"import{Http}from'../../config/Http';import{changeLoading}from'./loading.action';import{changeNotify}from'./notify.action';import{index}from'./me.action';export var actionTypes={CHANGE:'CHANGE_AUTH',SUCCESS:'SUCCESS_AUTH'};export var changeAuth=function changeAuth(data){return{type:actionTypes.CHANGE,data:data};};export var successAuth=function successAuth(data){return{type:actionTypes.SUCCESS,data:data};};export var SetUserToken=function SetUserToken(token){return function(dispatch){localStorage.setItem('access_token',token);dispatch(changeAuth({email:'',password:''}));dispatch(successAuth(true));};};export var loginAuth=function loginAuth(credentials){return function(dispatch){dispatch(changeLoading({open:true,msg:'Autenticndo usuário...'}));return Http.post('/login',{email:credentials.email,password:credentials.password}).then(function(response){if(typeof response!==undefined){if(response.data.access_token){dispatch(changeLoading({open:false}));dispatch(SetUserToken(response.data.access_token));dispatch(index());}}}).catch(function(error){if(typeof error.response!=='undefined'){if(error.response.status===401||error.response.status===400){dispatch(changeLoading({open:false}));dispatch(changeNotify({open:true,class:'error',msg:'Email e/ou senha incorretos'}));}}else{dispatch(changeLoading({open:false}));dispatch(changeNotify({open:true,class:'error',msg:'Erro o se conectar ao servidor'}));}});};};","map":{"version":3,"sources":["C:/laragon/www/loja-bim/src/store/actions/auth.action.js"],"names":["Http","changeLoading","changeNotify","index","actionTypes","CHANGE","SUCCESS","changeAuth","data","type","successAuth","SetUserToken","token","dispatch","localStorage","setItem","email","password","loginAuth","credentials","open","msg","post","then","response","undefined","access_token","catch","error","status","class"],"mappings":"AAAA,OAASA,IAAT,KAAqB,mBAArB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OAASC,YAAT,KAA6B,iBAA7B,CACA,OAASC,KAAT,KAAsB,aAAtB,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,CACzBC,MAAM,CAAE,aADiB,CAEzBC,OAAO,CAAE,cAFgB,CAApB,CAKP,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,QAAW,CACnCC,IAAI,CAAEL,WAAW,CAACC,MADiB,CAEnCG,IAAI,CAAJA,IAFmC,CAAX,EAAnB,CAKP,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACF,IAAD,QAAW,CACpCC,IAAI,CAAEL,WAAW,CAACE,OADkB,CAEpCE,IAAI,CAAJA,IAFoC,CAAX,EAApB,CAKP,MAAO,IAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,QAAI,UAAAC,QAAQ,CAAI,CAE/CC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCH,KAArC,EAEAC,QAAQ,CAAEN,UAAU,CAAC,CACnBS,KAAK,CAAE,EADY,CAEnBC,QAAQ,CAAE,EAFS,CAAD,CAAZ,CAAR,CAKAJ,QAAQ,CAAEH,WAAW,CAAC,IAAD,CAAb,CAAR,CACD,CAVgC,EAA1B,CAYP,MAAO,IAAMQ,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAC,WAAW,QAAI,UAAAN,QAAQ,CAAI,CAElDA,QAAQ,CAACZ,aAAa,CAAC,CACrBmB,IAAI,CAAE,IADe,CAErBC,GAAG,CAAE,wBAFgB,CAAD,CAAd,CAAR,CAKA,MAAOrB,CAAAA,IAAI,CAACsB,IAAL,CAAU,QAAV,CAAoB,CACzBN,KAAK,CAAEG,WAAW,CAACH,KADM,CAEzBC,QAAQ,CAAEE,WAAW,CAACF,QAFG,CAApB,EAGJM,IAHI,CAGE,SAACC,QAAD,CAAY,CACnB,GAAI,MAAOA,CAAAA,QAAP,GAAoBC,SAAxB,CAAkC,CAChC,GAAGD,QAAQ,CAAChB,IAAT,CAAckB,YAAjB,CAA8B,CAC5Bb,QAAQ,CAAGZ,aAAa,CAAC,CAAEmB,IAAI,CAAE,KAAR,CAAD,CAAhB,CAAR,CACAP,QAAQ,CAAGF,YAAY,CAACa,QAAQ,CAAChB,IAAT,CAAckB,YAAf,CAAf,CAAR,CACAb,QAAQ,CAAGV,KAAK,EAAR,CAAR,CACD,CACF,CACF,CAXM,EAWJwB,KAXI,CAWE,SAAAC,KAAK,CAAI,CAChB,GAAI,MAAOA,CAAAA,KAAK,CAACJ,QAAb,GAA0B,WAA9B,CAA0C,CACxC,GAAII,KAAK,CAACJ,QAAN,CAAeK,MAAf,GAA0B,GAA1B,EAAiCD,KAAK,CAACJ,QAAN,CAAeK,MAAf,GAA0B,GAA/D,CAAmE,CACjEhB,QAAQ,CAAEZ,aAAa,CAAC,CAAEmB,IAAI,CAAE,KAAR,CAAD,CAAf,CAAR,CACAP,QAAQ,CAAEX,YAAY,CAAC,CACrBkB,IAAI,CAAE,IADe,CAErBU,KAAK,CAAE,OAFc,CAGrBT,GAAG,CAAE,6BAHgB,CAAD,CAAd,CAAR,CAKD,CACF,CATD,IASO,CACLR,QAAQ,CAAEZ,aAAa,CAAC,CAAEmB,IAAI,CAAE,KAAR,CAAD,CAAf,CAAR,CACEP,QAAQ,CAAEX,YAAY,CAAC,CACrBkB,IAAI,CAAE,IADe,CAErBU,KAAK,CAAE,OAFc,CAGrBT,GAAG,CAAE,gCAHgB,CAAD,CAAd,CAAR,CAMH,CACF,CA9BM,CAAP,CA+BD,CAtCmC,EAA7B","sourcesContent":["import { Http } from '../../config/Http';\r\nimport { changeLoading } from './loading.action';\r\nimport { changeNotify } from './notify.action';\r\nimport { index } from './me.action';\r\n\r\nexport const actionTypes = {\r\n  CHANGE: 'CHANGE_AUTH',\r\n  SUCCESS: 'SUCCESS_AUTH'\r\n}\r\n\r\nexport const changeAuth = (data) => ({\r\n  type: actionTypes.CHANGE,\r\n  data,\r\n})\r\n\r\nexport const successAuth = (data) => ({\r\n  type: actionTypes.SUCCESS,\r\n  data,\r\n})\r\n\r\nexport const SetUserToken = token => dispatch => {\r\n\r\n  localStorage.setItem('access_token', token);\r\n\r\n  dispatch( changeAuth({\r\n    email: '',\r\n    password: ''\r\n  }) )\r\n\r\n  dispatch( successAuth(true) )\r\n}\r\n\r\nexport const loginAuth = credentials => dispatch => {\r\n\r\n  dispatch(changeLoading({\r\n    open: true,\r\n    msg: 'Autenticndo usuário...'\r\n  }))\r\n\r\n  return Http.post('/login', {\r\n    email: credentials.email,\r\n    password: credentials.password\r\n  }).then( (response)=>{\r\n    if (typeof response !== undefined){\r\n      if(response.data.access_token){\r\n        dispatch ( changeLoading({ open: false }) );\r\n        dispatch ( SetUserToken(response.data.access_token) );\r\n        dispatch ( index() );\r\n      }\r\n    }\r\n  }).catch(error => {\r\n    if (typeof error.response !== 'undefined'){\r\n      if (error.response.status === 401 || error.response.status === 400){\r\n        dispatch( changeLoading({ open: false }));\r\n        dispatch( changeNotify({\r\n          open: true,\r\n          class: 'error',\r\n          msg: 'Email e/ou senha incorretos'\r\n        }));\r\n      }\r\n    } else {\r\n      dispatch( changeLoading({ open: false }));\r\n        dispatch( changeNotify({\r\n          open: true,\r\n          class: 'error',\r\n          msg: 'Erro o se conectar ao servidor'\r\n        })\r\n      );\r\n    }\r\n  })\r\n}"]},"metadata":{},"sourceType":"module"}